#!/bin/ksh

while getopts "d:" option
do
    case $option in 
	d)
	    port=:$((5900+$OPTARG))
	    ;;
    esac
done
shift $((${OPTIND} - 1)) 
host=$(echo $1 | sed 's|homer|krypter|g;s|marge|starbuck|g;s|.local||')

extension=".local"

if [[ ${host} =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$ ]]
then
    echo "success"
    extension=""
else
    echo "fail"
fi

open vnc://${host}${extension}${port}
